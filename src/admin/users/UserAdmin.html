<ul>
    <table class="table users">
        <thead>
            <tr>
                <th><a href="?sort=id">#</a></th>
                <th><a href="?sort=name">{__("Name", "admin-users")}</a></th>
                <th><a href="?sort=email">{__("Sign-In", "admin-users")}</a></th>
                <th>{__("Status", "admin-users")}</th>
                <th><a href="?sort=created_at">{__("Created at", "admin-users")}</a></th>
                <th class="center">{__("Charts", "admin-users")}</th>
                <th>{__("Actions", "admin-users")}</th>
            </tr>
        </thead>
        <tbody class="users">
            {#each users as user}
            <UserAdminRow {user}></UserAdminRow>
            {/each}
        </tbody>
    </table>
</ul>

<script>
    import { __ } from '../../shared/l10n';
    import { getJSON } from '../../shared/utils';
    import UserAdminRow from './UserAdminRow.html';

    export default {
        components: { UserAdminRow },

        data() {
            return {
                users: []
            };
        },

        helpers: { __ },

        oncreate() {
            getJSON('//datawrapper.local:3000/admin/users', data => {
                if (data && data.list) {
                    this.set({ users: data.list });
                }
            });
        }
    };
</script>
