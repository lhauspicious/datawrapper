<div class="pagination">
    <ul>
        {#each items as item}
        <li class="{item.active ? 'active' : ''}">
            <a href="{item.href}">{item.text}</a>
        </li>
        {/each}
    </ul>
</div>

<script>
    const query = ({ limit, offset }) => `?limit=${limit}&offset=${offset}`;
    const isActive = ({ currentPage, i, pageCount }) =>
        currentPage === i || currentPage === pageCount;

    export default {
        computed: {
            items: ({ total, limit, offset }) => {
                const pageCount = Math.ceil(total / limit);
                const currentPage = Math.ceil(offset / limit);
                const pages = Array.from({ length: pageCount }, (v, i) => ({
                    text: i + 1,
                    href: query({ limit, offset: i * limit }),
                    active: isActive({ currentPage, i, pageCount })
                }));
                return [
                    {
                        text: '«',
                        href: query({ limit, offset: 0 }),
                        active: isActive({ currentPage, pageCount, i: 0 })
                    },
                    ...pages,
                    {
                        text: '»',
                        href: query({ limit, offset: (pageCount - 1) * limit }),
                        active: isActive({ currentPage, pageCount, i: pageCount - 1 })
                    }
                ];
            }
        },

        methods: {}
    };
</script>
